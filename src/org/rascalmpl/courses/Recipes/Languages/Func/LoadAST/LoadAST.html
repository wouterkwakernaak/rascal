<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">

<!---- DO NOT EDIT: HTML generated by CourseCompiler ---->


<head>
<title>Recipes/Languages/Func/LoadAST</title>

<meta name="description" content="Recipes/Languages/Func/LoadAST:  Parse Func program from string or file and convert to an abstract syntax tree.">

<meta name="keywords" content="Recipes/Languages/Func/LoadAST, Rascal, meta-programming, software analysis, software transformation">
<link type="text/css" rel="stylesheet" href="/prelude.css"/>
<link type="text/css" rel="stylesheet" href="/jquery.autocomplete.css"/>
<script type="text/javascript" src="/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/jquery.colorbox-min.js"></script>
<script type="text/javascript" src="/jquery.cookie.js"></script>
<script type="text/javascript" src="/jquery.jstree.js"></script>
<script type="text/javascript" src="/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/jquery.history.js"></script>
<script type="text/javascript" src="/globals.js"></script>
<script type="text/javascript" src="/prelude.js"></script>
<script type="text/javascript" src="/Recipes/course.js"></script>

</head>
<body>
<table id="container"><tr><td id="tdlogo"><a id="tutorAction" href="/index.html"><img id="leftIcon" height="40" width="40" src="/images/rascal-tutor-small.png"></a></td><td id="tdsearch">
<div id="searchBox">
  <form method="GET" id="searchForm" action="/search"> 
    <img id="searchIcon" height="20" width="20" src="/images/magnify.png">
    <input type="hidden" name="concept" value="Recipes/Languages/Func/LoadAST">
    <input type="text" id="searchField" name="term" autocomplete="off"><br />
    <div id="popups"></div>
  </form>
</div>
         </td></tr><tr><td id="tdnav">
<a id="navPanePlaceHolder" href="/Recipes/navigate.html" >Navigation</a>
<script type="text/javascript"> var navigationPaneSource="/Recipes/navigate.html"; </script></td><td id="tdconcept">
<div id="conceptPane">

<div id="Name">
<span class="sectionHead">Name</span> <a href="/Recipes/Recipes.html">Recipes</a>/<a href="/Recipes/Languages/Languages.html">Languages</a>/<a href="/Recipes/Languages/Func/Func.html">Func</a>/<a href="/Recipes/Languages/Func/LoadAST/LoadAST.html">LoadAST</a>
</div>

<div id="Synopsis">
<span class="sectionHead">Synopsis</span>  Parse Func program from string or file and convert to an abstract syntax tree.

</div>

	                       
                           
                           
                           
<div id="Description">
<span class="sectionHead">Description</span>  To simplify later processing, Func programs are converted to an abstract syntax tree.

</div>

  	                       
<div id="Examples">
<span class="sectionHead">Examples</span>  The concrete syntax for Func is described in <a href="/Recipes/Languages/Func/ConcreteSyntax/ConcreteSyntax.html">Func/ConcreteSyntax</a> and its
 abstract syntax in <a href="/Recipes/Languages/Func/AbstractSyntax/AbstractSyntax.html">Func/AbstractSyntax</a>.
 Rather than manually writing conversion rules from Func parse trees to Func abstract syntax trees
 we use our secret weapon: <a href="/Rascal/Libraries/Prelude/ParseTree/implode/implode.html">Rascal:implode</a> that performs the mapping for us.
 As you see when you compare the concrete and abstract syntax, the ground work has already been done
 by appropriately labelling concrete rules with constructor names of the abstract syntax.
 <br/>
<br/>

 Here is the code for the <code>load</code> funcion:
  <pre class="listing">module demo::lang::Func::Load

import demo::lang::Func::Func;
import demo::lang::Func::AST;
import demo::lang::Func::Parse;

import ParseTree;

public demo::lang::Func::AST::Prog implode(demo::lang::Func::Func::Prog p) = 
       implode(#demo::lang::Func::AST::Prog, p);

public demo::lang::Func::AST::Prog load(loc l) = implode(parse(l));
public demo::lang::Func::AST::Prog load(str s) = implode(parse(s));

</pre> This looks simple but also slightly intimidating due to the many qualified names.
 The issue is that the names in the concrete and abstract syntax are (on purpose) overloaded.
 A name like <code>Prog</code> can be the one from the concrete syntax(i.e., <code>demo::lang::Func::Func::Prog</code>)
 or the one from the abstract syntax (i.e., <code>demo::lang::Func::AST::Prog</code>).
 <br/>
<br/>

 For instance, the local version of <code>implode</code> defined here get a concrete <code>Prog</code> as argument and returns an abstract one.
 Both <code>load</code> function return an abstract <code>Prog</code>.
 <br/>
<br/>

 Let's try this on example <code>F0</code>:
 <pre class="listing">fact(n) = if n &lt;= 1 then
             1 
          else 
             n * fact(n-1)
          end
</pre> <pre class="screen"><span class="prompt">rascal></span>import demo::lang::Func::Load;
ok
<span class="prompt">rascal></span>import demo::lang::Func::programs::F0;
ok
<span class="prompt">rascal></span>load(F0);
Prog: prog([func(
      "fact",
      ["n"],
      cond(
        leq(
          var("n")[
            @location=|file://-|(13,1,&lt;1,13>,&lt;1,14>),
            @comments=()
          ],
          nat(1)[
            @location=|file://-|(18,1,&lt;1,18>,&lt;1,19>),
            @comments=()
          ])[
          @location=|file://-|(13,6,&lt;1,13>,&lt;1,19>),
          @comments=()
        ],
        nat(1)[
          @location=|file://-|(38,1,&lt;2,13>,&lt;2,14>),
          @comments=()
        ],
        mul(
          var("n")[
            @location=|file://-|(70,1,&lt;4,13>,&lt;4,14>),
            @comments=()
          ],
          call(
            "fact",
            [sub(
                var("n")[
                  @location=|file://-|(79,1,&lt;4,22>,&lt;4,23>),
                  @comments=()
                ],
                nat(1)[
                  @location=|file://-|(81,1,&lt;4,24>,&lt;4,25>),
                  @comments=()
                ])[
                @location=|file://-|(79,3,&lt;4,22>,&lt;4,25>),
                @comments=()
              ]])[
            @location=|file://-|(74,9,&lt;4,17>,&lt;4,26>),
            @comments=()
          ])[
          @comments=(),
          @location=|file://-|(70,13,&lt;4,13>,&lt;4,26>)
        ])[
        @location=|file://-|(10,87,&lt;1,10>,&lt;5,13>),
        @comments=()
      ])[
      @location=|file://-|(0,97,&lt;1,0>,&lt;5,13>),
      @comments=()
    ]])[
  @location=|file://-|(0,97,&lt;1,0>,&lt;5,13>),
  @comments=()
]
</pre>  We get the original program and its <b>abstract syntax tree</b> of type <code>Prog</code> back.
  In case of doubt, compare this with the result in <a href="/Recipes/Languages/Func/Parse/Parse.html">Func/Parse</a> where we did obtain a parse tree.
  Next, we try the same from a file:
<pre class="screen"><span class="prompt">rascal></span>load(|std:///demo/lang/Func/programs/F0.func|);
Prog: prog([func(
      "fact",
      ["n"],
      cond(
        leq(
          var("n")[
            @location=|std:///demo/lang/Func/programs/F0.func|(13,1,&lt;1,13>,&lt;1,14>),
            @comments=()
          ],
          nat(1)[
            @comments=(),
            @location=|std:///demo/lang/Func/programs/F0.func|(18,1,&lt;1,18>,&lt;1,19>)
          ])[
          @location=|std:///demo/lang/Func/programs/F0.func|(13,6,&lt;1,13>,&lt;1,19>),
          @comments=()
        ],
        nat(1)[
          @location=|std:///demo/lang/Func/programs/F0.func|(38,1,&lt;2,13>,&lt;2,14>),
          @comments=()
        ],
        mul(
          var("n")[
            @location=|std:///demo/lang/Func/programs/F0.func|(70,1,&lt;4,13>,&lt;4,14>),
            @comments=()
          ],
          call(
            "fact",
            [sub(
                var("n")[
                  @location=|std:///demo/lang/Func/programs/F0.func|(79,1,&lt;4,22>,&lt;4,23>),
                  @comments=()
                ],
                nat(1)[
                  @location=|std:///demo/lang/Func/programs/F0.func|(81,1,&lt;4,24>,&lt;4,25>),
                  @comments=()
                ])[
                @comments=(),
                @location=|std:///demo/lang/Func/programs/F0.func|(79,3,&lt;4,22>,&lt;4,25>)
              ]])[
            @comments=(),
            @location=|std:///demo/lang/Func/programs/F0.func|(74,9,&lt;4,17>,&lt;4,26>)
          ])[
          @location=|std:///demo/lang/Func/programs/F0.func|(70,13,&lt;4,13>,&lt;4,26>),
          @comments=()
        ])[
        @location=|std:///demo/lang/Func/programs/F0.func|(10,87,&lt;1,10>,&lt;5,13>),
        @comments=()
      ])[
      @comments=(),
      @location=|std:///demo/lang/Func/programs/F0.func|(0,97,&lt;1,0>,&lt;5,13>)
    ]])[
  @comments=(),
  @location=|std:///demo/lang/Func/programs/F0.func|(0,97,&lt;1,0>,&lt;5,13>)
]
</pre>
</div>

  	                       
  	                       
  	                       
<a id="tutorAction" href="/index.html"><img id="leftIcon" height="40" width="40" src="/images/rascal-tutor-small.png"></a><div id="editMenu">[<a id="editAction" href="/edit?concept=Recipes/Languages/Func/LoadAST&new=false"><b>Edit</b></a>] | 
               [<a id="newAction" href="/edit?concept=Recipes/Languages/Func/LoadAST&new=true"><b>New Subconcept</b></a>] |
               [<a id="compileAction" href="/compile?name=Recipes"><b>Recompile Course</b></a>] |
               [<a id="warnAction" href="/Recipes/warnings.html"><b>Warnings</b></a>]</div>
<span class="editMenuFooter">Is this page unclear, or have you spotted an error? Please add a comment below and help us to improve it. For all other questions and remarks, visit <a href="http://ask.rascal-mpl.org">ask.rascal-mpl.org</a>. </span>
</div>
</td></tr></table>
</body>
</html>