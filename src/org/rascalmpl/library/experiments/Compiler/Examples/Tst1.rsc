module experiments::Compiler::Examples::Tst1

import ParseTree;

syntax A = "a";
syntax B = "b";
start syntax AB = A B;

value main(list[value] args) = (AB) `ab` := [AB] "ab";

Tree parsedFragment =
appl(
  prod(
    sort("AB"),
    [
      lit("x"),
      layouts("Whitespace"),
      \iter-seps(
        sort("A"),
        [layouts("Whitespace")]),
      layouts("Whitespace"),
      lit("y")
    ],
    {}),
  [
    appl(
      prod(
        lit("x"),
        [\char-class([range(120,120)])],
        {}),
      [char(120)]),
    appl(
      prod(
        layouts("Whitespace"),
        [\iter-star(\char-class([range(32,32)]))],
        {}),
      [appl(
          regular(\iter-star(\char-class([range(32,32)]))),
          [])[
          @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(1,0,<1,1>,<1,1>)
        ]])[
      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(1,0,<1,1>,<1,1>)
    ],
    appl(
      regular(\iter-seps(
          sort("A"),
          [layouts("Whitespace")])),
      [appl(
          prod(
            label(
              "hole",
              lex("ConcretePart")),
            [label(
                "hole",
                sort("ConcreteHole"))],
            {}),
          [appl(
              prod(
                label(
                  "one",
                  sort("ConcreteHole")),
                [
                  lit("\<"),
                  layouts("LAYOUTLIST"),
                  label(
                    "symbol",
                    sort("Sym")),
                  layouts("LAYOUTLIST"),
                  label(
                    "name",
                    lex("Name")),
                  layouts("LAYOUTLIST"),
                  lit("\>")
                ],
                {}),
              [
                appl(
                  prod(
                    lit("\<"),
                    [\char-class([range(60,60)])],
                    {}),
                  [char(60)]),
                appl(
                  prod(
                    layouts("LAYOUTLIST"),
                    [conditional(
                        \iter-star(lex("LAYOUT")),
                        {
                          \not-follow(lit("//")),
                          \not-follow(lit("/*")),
                          \not-follow(\char-class([
                                range(9,13),
                                range(32,32),
                                range(133,133),
                                range(160,160),
                                range(5760,5760),
                                range(6158,6158),
                                range(8192,8202),
                                range(8232,8233),
                                range(8239,8239),
                                range(8287,8287),
                                range(12288,12288)
                              ]))
                        })],
                    {}),
                  [appl(
                      regular(\iter-star(lex("LAYOUT"))),
                      [])[
                      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(224,0,<12,39>,<12,39>)
                    ]])[
                  @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(224,0,<12,39>,<12,39>)
                ],
                appl(
                  prod(
                    label(
                      "iter",
                      sort("Sym")),
                    [
                      label(
                        "symbol",
                        sort("Sym")),
                      layouts("LAYOUTLIST"),
                      lit("+")
                    ],
                    {}),
                  [
                    appl(
                      prod(
                        label(
                          "nonterminal",
                          sort("Sym")),
                        [conditional(
                            label(
                              "nonterminal",
                              lex("Nonterminal")),
                            {\not-follow(lit("["))})],
                        {}),
                      [appl(
                          prod(
                            lex("Nonterminal"),
                            [conditional(
                                seq([
                                    conditional(
                                      \char-class([range(65,90)]),
                                      {\not-precede(\char-class([range(65,90)]))}),
                                    conditional(
                                      \iter-star(\char-class([
                                            range(48,57),
                                            range(65,90),
                                            range(95,95),
                                            range(97,122)
                                          ])),
                                      {\not-follow(\char-class([
                                              range(48,57),
                                              range(65,90),
                                              range(95,95),
                                              range(97,122)
                                            ]))})
                                  ]),
                                {delete(keywords("RascalKeywords"))})],
                            {}),
                          [appl(
                              regular(seq([
                                    conditional(
                                      \char-class([range(65,90)]),
                                      {\not-precede(\char-class([range(65,90)]))}),
                                    conditional(
                                      \iter-star(\char-class([
                                            range(48,57),
                                            range(65,90),
                                            range(95,95),
                                            range(97,122)
                                          ])),
                                      {\not-follow(\char-class([
                                              range(48,57),
                                              range(65,90),
                                              range(95,95),
                                              range(97,122)
                                            ]))})
                                  ])),
                              [
                                char(65),
                                appl(
                                  regular(\iter-star(\char-class([
                                          range(48,57),
                                          range(65,90),
                                          range(95,95),
                                          range(97,122)
                                        ]))),
                                  [])[
                                  @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(225,0,<12,40>,<12,40>)
                                ]
                              ])[
                              @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(224,1,<12,39>,<12,40>)
                            ]])[
                          @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(224,1,<12,39>,<12,40>)
                        ]])[
                      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(224,1,<12,39>,<12,40>)
                    ],
                    appl(
                      prod(
                        layouts("LAYOUTLIST"),
                        [conditional(
                            \iter-star(lex("LAYOUT")),
                            {
                              \not-follow(lit("//")),
                              \not-follow(lit("/*")),
                              \not-follow(\char-class([
                                    range(9,13),
                                    range(32,32),
                                    range(133,133),
                                    range(160,160),
                                    range(5760,5760),
                                    range(6158,6158),
                                    range(8192,8202),
                                    range(8232,8233),
                                    range(8239,8239),
                                    range(8287,8287),
                                    range(12288,12288)
                                  ]))
                            })],
                        {}),
                      [appl(
                          regular(\iter-star(lex("LAYOUT"))),
                          [])[
                          @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(225,0,<12,40>,<12,40>)
                        ]])[
                      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(225,0,<12,40>,<12,40>)
                    ],
                    appl(
                      prod(
                        lit("+"),
                        [\char-class([range(43,43)])],
                        {}),
                      [char(43)])
                  ])[
                  @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(224,2,<12,39>,<12,41>)
                ],
                appl(
                  prod(
                    layouts("LAYOUTLIST"),
                    [conditional(
                        \iter-star(lex("LAYOUT")),
                        {
                          \not-follow(lit("//")),
                          \not-follow(lit("/*")),
                          \not-follow(\char-class([
                                range(9,13),
                                range(32,32),
                                range(133,133),
                                range(160,160),
                                range(5760,5760),
                                range(6158,6158),
                                range(8192,8202),
                                range(8232,8233),
                                range(8239,8239),
                                range(8287,8287),
                                range(12288,12288)
                              ]))
                        })],
                    {}),
                  [appl(
                      regular(\iter-star(lex("LAYOUT"))),
                      [appl(
                          prod(
                            lex("LAYOUT"),
                            [\char-class([
                                  range(9,13),
                                  range(32,32),
                                  range(133,133),
                                  range(160,160),
                                  range(5760,5760),
                                  range(6158,6158),
                                  range(8192,8202),
                                  range(8232,8233),
                                  range(8239,8239),
                                  range(8287,8287),
                                  range(12288,12288)
                                ])],
                            {}),
                          [char(32)])[
                          @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(226,1,<12,41>,<12,42>)
                        ]])[
                      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(226,1,<12,41>,<12,42>)
                    ]])[
                  @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(226,1,<12,41>,<12,42>)
                ],
                appl(
                  prod(
                    lex("Name"),
                    [conditional(
                        seq([
                            conditional(
                              \char-class([
                                  range(65,90),
                                  range(95,95),
                                  range(97,122)
                                ]),
                              {\not-precede(\char-class([
                                      range(65,90),
                                      range(95,95),
                                      range(97,122)
                                    ]))}),
                            conditional(
                              \iter-star(\char-class([
                                    range(48,57),
                                    range(65,90),
                                    range(95,95),
                                    range(97,122)
                                  ])),
                              {\not-follow(\char-class([
                                      range(48,57),
                                      range(65,90),
                                      range(95,95),
                                      range(97,122)
                                    ]))})
                          ]),
                        {delete(keywords("RascalKeywords"))})],
                    {}),
                  [appl(
                      regular(seq([
                            conditional(
                              \char-class([
                                  range(65,90),
                                  range(95,95),
                                  range(97,122)
                                ]),
                              {\not-precede(\char-class([
                                      range(65,90),
                                      range(95,95),
                                      range(97,122)
                                    ]))}),
                            conditional(
                              \iter-star(\char-class([
                                    range(48,57),
                                    range(65,90),
                                    range(95,95),
                                    range(97,122)
                                  ])),
                              {\not-follow(\char-class([
                                      range(48,57),
                                      range(65,90),
                                      range(95,95),
                                      range(97,122)
                                    ]))})
                          ])),
                      [
                        char(88),
                        appl(
                          regular(\iter-star(\char-class([
                                  range(48,57),
                                  range(65,90),
                                  range(95,95),
                                  range(97,122)
                                ]))),
                          [
                            char(88),
                            char(88),
                            char(88),
                            char(88)
                          ])[
                          @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(228,4,<12,43>,<12,47>)
                        ]
                      ])[
                      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(227,5,<12,42>,<12,47>)
                    ]])[
                  @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(227,5,<12,42>,<12,47>)
                ],
                appl(
                  prod(
                    layouts("LAYOUTLIST"),
                    [conditional(
                        \iter-star(lex("LAYOUT")),
                        {
                          \not-follow(lit("//")),
                          \not-follow(lit("/*")),
                          \not-follow(\char-class([
                                range(9,13),
                                range(32,32),
                                range(133,133),
                                range(160,160),
                                range(5760,5760),
                                range(6158,6158),
                                range(8192,8202),
                                range(8232,8233),
                                range(8239,8239),
                                range(8287,8287),
                                range(12288,12288)
                              ]))
                        })],
                    {}),
                  [appl(
                      regular(\iter-star(lex("LAYOUT"))),
                      [])[
                      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(232,0,<12,47>,<12,47>)
                    ]])[
                  @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(232,0,<12,47>,<12,47>)
                ],
                appl(
                  prod(
                    lit("\>"),
                    [\char-class([range(62,62)])],
                    {}),
                  [char(62)])
              ])[
              @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(223,10,<12,38>,<12,48>)
            ]])[
          @holeType=\iter-seps(
            sort("A"),
            [layouts("Whitespace")]),
          @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(223,10,<12,38>,<12,48>)
        ]])[
      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(1,19,<1,1>,<1,20>)
    ],
    appl(
      prod(
        layouts("Whitespace"),
        [\iter-star(\char-class([range(32,32)]))],
        {}),
      [appl(
          regular(\iter-star(\char-class([range(32,32)]))),
          [])[
          @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(20,0,<1,20>,<1,20>)
        ]])[
      @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(20,0,<1,20>,<1,20>)
    ],
    appl(
      prod(
        lit("y"),
        [\char-class([range(121,121)])],
        {}),
      [char(121)])
  ])[
  @\loc=|rascal:///experiments/Compiler/Examples/Tst.rsc|(0,21,<1,0>,<1,21>)
];